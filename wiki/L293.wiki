#summary L293 H-bridge.
#labels L293,H-Bridge

= Introduction =

An H bridge is allows a small logic level signal to control DC of greater voltage and current. 

Using L293 with the prop, we can use the prop 3.3 volts at a few milliamps to control power to a DC motor.  The L293 four half H-bridge can control two DC motors, and both are reversible.

= Parts =

 * Prop Quickstart
 * L293
 * Breadboard
 * assorted jumper wires


= Quick Demo =

The Quickstart Touch Demo http://code.google.com/p/propforth/downloads/detail?name=QuickstartTouchDemo20120611-1540.txt is a handy place to start.

When the resistive touch pads on pins 0-7 are touched, the LEDS on pins 16-21 are lighted.  The output pins are set high to light the LEDs.  These can also be used to control the L293 inputs.

 * Load propforth 5.5 to the Quickstart per the instruction in the archive.
 * Load the Quickstart touch demo to the prop following the instructions in the demo.
 * Verify the LEDs light when the touch pads are touched.


= Circuit =

 * Insert the L293 pins into the bread board. Be sure to straddle the center gap, so each pin has it own conductor row.
 * Connect quickstart Vss to L293 Ground.  Be sure to connect ALL the L293 to ground, there are several. Legs 4 and 5 must be connected to each other, and also connected to 12 and 13. I used three jumper to connect these together, and a fourth jumper to connect these to the prop Vss.
 * Connect quickstart 3.3volts to VCC1 and Enable
 * Connect quickstart Vin (5 volts) to VCC2
 * Connect motor A to L293 1Y and L293 2Y
 * Connect motor B to L293 3Y and L293 4Y
 * Connect L293 A1 to Prop pin 16
 * Connect L293 A2 to Prop pin 17
 * Connect L293 A3 to Prop pin 22
 * Connect L293 A4 to Prop pin 23

= Result =

When connected to a USB power source, the quickstart will boot up.  Propforth will be loaded from EEPROM into memory.  The Quickstarttouchdemo should have automatically saved itself in the EEPROM boot image, and should immediately run at boot.  

The Quickstartouchdemo should be running, and the quickstart blue LEDs should light when the cooresponding resistive touch pad button is pressed. 

When pad 0 or 1 is touched (LED 16 or 17 lights up), motor A should turn clockwise for 16, and counter clockwise for 17.  Or vice versa depending on how the motor is swapped.

When pad 6 or 7 is touched (LED 22 or 23 lights up), motor B should turn clockwise for 22, and counter clockwise for 23.  Or vice versa depending on how the motor is swapped.

When no LEDs are lit, the motor turn freely.

NOTE on Emergency STOP:  The Quickstart touch demo tests the resistive touch pad and sets the LED output more than 60 times a second.  Even though the the motor control pins APPEAR to be on at the same time,  they might not be.  The result is the Emergency Stop behavior might not noticable using the Quickstart touch demo.

= Next Step =

Once the test set up is demonstrated to be completely working, we can procede with other experiments.

== different power, connected to the PC ==

Remove the jumper from prop Vin to Vcc2.  Replace this with a difference power source.  A 9 volt battery or a 12 volt battery pack (8 alkaline batteries of 1.5 volts each) will  work well.  Connect the battry + to Vcc2, and battery - to L293 ground. The motors will turn faster and with more torque using the higher volt packs.  The prop will continue to work from the 5 volt USB power, effectively controling the larger voltage circuit. 

== Stand alone with 9 volt Battery ==

Connect a 9 volt battery + to the Prop Vin and to the L293 Vcc2, and battery - to the ground for both.  The 9 volt battery is suitable tfor the prop 4.5-9 volt Vin. The motor will turn much faster.   

== Stand alone using a USB Power bank ==

A USB power bank is the rechargable battery pack that can recharge a phone or other device with a USB power input connection.  These are still fairly rare at this writing but are becoming more commonplace.

The Quickstart normally will not boot unless it is connected to a computer.  We need to add another jumper to allow the quickstart to use the USB power bank instead of a computerr. 

Add one more jumper from Vss to /USB_PWR_EN (Prop Quickstart header connector position 30).  The rig may now run from the USB power bank.

If the prop reboot when the motors start to turn, the cable may be too flimsy.  A short micro USB cable from Ebay had this problem. I replaced the short cheap cable I got from Ebay with a much fatter cable.  The rig now works well.

== Stand alone with 12 volt battery pack ==

Ensure that 12 Volts is NOT connected to Vin.  12 volts excedes the quick start input.  The quickstart must be run with a separate 4.5 - 9 volt power source, either battery or USB.  Just make sure all the grounds are connected. 

== Different software ==

Now we can write new software for the prop to to control DC motors for an arbitrary appplication. Using just two I/O pins per DC motor, we can control the direction of rotation by setting one pin high and the other low. 

Both pin low allow the moter to turn freely (coast) and both pins high cause the motor to emergency stop (from the L293 datasheet).  

= end =

If you have questions or comments, I can be contacted as use id prof_braino on the Parallax Forums.

http://forums.parallax.com/forum.php

The Propforth 5.5 conversation thread is at: http://forums.parallax.com/showthread.php/146693-Propforth-v5.5-is-available-for-download/