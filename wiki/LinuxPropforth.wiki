#summary Using Propforth with Linux

<wiki:toc max_depth="9" />

= Introduction =

There's a couple ways.  I use Ubuntu 12.04 and run a virtualbox windows xp session.

= Install Linux =

If you have an old PC, the hardware might not accept 12.04 directly.

Using a KT600a motherboard, I had to install 11.04 first, then upgrade.

= OPTION: under examination - SimpleIDE =

[https://sites.google.com/site/propellergcc/downloads SimpleIDE ] is part of the Prop GCC project.  The goal is to extend the GCC compiler tools to allow compilation to the prop chip as a target.   The project started on the prop 1 and should carry over to the Prop 2.  The guys working on this are very good at what they do.  Be aware that this is in development an may not be usable for beginners. 

This is the version userd for this test [https://propside.googlecode.com/files/SimpleIDE-0-8-5-1.i686-debian-linux.tar.bz2 https://propside.googlecode.com/files/SimpleIDE-0-8-5-1.i686-debian-linux.tar.bz2]

Per the instruction on the download page: 


{{{
Unpack the tar.bz2 to your preferred directory, cd to the new SimpleIDE folder, and install by: sudo ./setup.sh $USER or by root as ./setup.sh username
}}}

What is the prefered directory?  I don't know, I'm just going to create one under my home directory until I find a reason to put it someplace else.  (Typically there should be someplace it "should" go, like under usr or share of etc or something, but I never figured that out yet.) 

So under home, I create a `PropSoftware` directory. 

cd to this 

'cd ~/PropSoftware'


= OPTION: Run a WXP Virtual Machine =

This is the brute force method.  It takes about an hour to set up the [https://www.virtualbox.org/ VirtualBox] software. It takes about 10 Gig minimum to set up a virtual hard disk.  It takes about an hour to install WXP on the virtual machine. It takes about an hour to set up the anti-virus nonsense.   It takes about two days for all the windows update nonsense to download and install.   

At the end of this time, the standard windows tools are available.  

It takes about the same time to boot the virtual machine as a physical machine (slow).   The virtual machine fights the linux OS for the resources (USB,CD, etc) so you have to be careful of that.  You still should not leave the windows machine running for any length of time, just as with a physical windows machine (prone to virus, trojans, various other vulnerabilities).

But at least it does the job. 

  == install Virtual Box ==

In the Ubuntu software center, Oracle Virtual Box 4.1.12 is offered, but this doesn't work.

Go to the developer site 

https://www.virtualbox.org/

and get 4.2 (4.2.4.2. 8 is what I used)

http://download.virtualbox.org/virtualbox/4.2.8/virtualbox-4.2_4.2.8-83876~Ubuntu~precise_i386.deb

  == Install Windows ==

Be sure you have a valid license

Be sure to install service pack 3, some antivirus (like AVG_free_x86_xx), and maybe a (more) secure browser like firefox.  This might be easier to do after mapping shared directories from linux, below.

Notice: if you are coming from Windows, the keyboard numeric keypad might behave oddly. If you prefer to have the keypad behave as in Windows:

  Applications > System Tools> System Settings

  Keyboard Layout > Layouts > Options 

  > Miscellaneous comp[compatibility options

*Shift with Numeric keypad works as in MS Windows*

  == install Guest extensions ==  

Launch the Oracle Virtual Box application.

Under Devices, select Install Guest applications

Allow the software to install, and reboot

     === Optional: 3D acceleration ===

  Restart Windows virtual machine in !SafeMode

  Again select install Guest Additions

  This time it will let you select enable 3D acceleration

  Allow the software to install and reboot


  == Allow USB ==

You will have gotten a bunch of messages saying USB is not captured, and mouse is captured.   Now we set up USB and get rid of the nag screens.

    === add your login ID to vboxusers group ===

You'll messages tell you to add your user to the vboxuser group

in a terminal (CTL+ALT+T) enter the command

{{{
sudo adduser <myloggin> vboxusers
}}}

    ===  Allow virtual session to access USB ===

Notice that you have to shutdown the windows virtual machine for this step.

Shutdown the Windows Virtual Machine.

In Oracle !VirtualBox Manager > Settings > USB 

  Verify that Enable USB Controller is checked

  Also check Enable USB 2.0 (EHCI) controller

An error warning pops up, that is OK. 

Restart the windows virtual machine 

  Start ->

Another warning comes up about auto capture keyboard, check "Do not show this again" and hit OK

The virtual machine should now be able to see the USB device when you connect your propplug, Quickstart, etc.

  == Map linux directory so Windows can see it == 

Devices > Shared Folders

Navigate to your Public directory. Map it as Read Only

     === Optional: Writable ===

From Linux:

Under your Public directory:

Make a subdirectory named "Writable" or something

Give this one full access

*This directory is so yu can send stuff back out to Linux from windows. The Public directory is read only in case something bad gets in through windows, it will limit its affect (maybe).* 

  == Install Proptool ==

Be sure to get version 1.3.  Note that Googling for parallax propeller proptool tends to bring up version 1.2.7 (R2) (or at least it used to, but its not the right version).

As of this writing, I notice there is a version 1.3.2, I will be trying that. 

http://www.parallax.com/Portals/0/Downloads/sw/propeller/Setup-Propeller-Tool-v1.3.2.zip

  == Download Propforth ==

The propforth download archive is pretty much self contained and complete. 

Unxip the archive. 

Skim doc/Propforth.htm sections 1 through 4.  Don't worry if it doesn all make a lot of sense right away.   Just do it.  

Do the examples in propforth.htm.  This is cut and paste.  Just do it.  It will start to make sense. 

READ doc/Propforth.htm sections 1 through 4 once more a little slower after your done the examples.   This time, when you do the examples, you will find that you can play and experiment, and you will be able to predict some of the results. 

Now you know as much as I do about propforth for the most part. From here on out, you skill level is a function of the time you spend practising using propforth.  The more hours you accumulate, the more skill you will develop. 

= NOT AN OPTION:  Attempted setting up WINE =

I tried WINE windows emulator version 1.4 as included in Ubuntu 1.4

I volunteered to update the WINEHQ database for the proptool as v1.3.2 is not listed yet.   I'll do more experiments if they get back to me. 

  == update drivers - NO - did not work ==

The installer ran.  I did NOT allow the installer to "update drivers" as I figured the windows drivers might be a problem in linux.  The result did not detect any USB port or quickstart. Uninstalled.

  == update drivers - YES - did not work ==

The installer ran again.  This time I allowed the installer to "update drivers".  The result did not detect any USB port or quickstart. 

= Conclusion: Use Virtualbox =

Use Oracle Virtualbox for now. 

Currently testing SimpleIDE for the prop on linux 20130404

WINE does not work with Propeller Tool, but a virtual machine session works pretty much the same as a regular windows session. 