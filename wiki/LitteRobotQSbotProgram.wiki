#summary Refined Program for Quickstart bot
#labels v5.5

= Overview =

Sal's demo program bot.f was first pass at brining together several drivers o test the LittleRobot proof of concept prototype.  Now that we've been using it, there are a couple inprovemnt we can make right off the bat. 

 * SR04 resistor - 10k
 * pinout - Don't use the pins already used by buttons 0-7 for peripherals
 * pinout - Use the pins already used by buttons 0-7 for input 
 * pinout - Use pins 8 to 15 for motors
 * pinout - Don't use the pins already used by LED on 16-23 for our drivers
 * pinout - Use the pins with LED 16-23 to display the distance measurement
 * pinout - Use pins 24 to 27, as these are not assigned
 * pinout - Use pin 24 for SR04 trigger
 * pinout - Use pin 25 for SR04 echo
 * pinout - Use pin 26 for blue tooth Tx
 * pinout - Use pin 27 for blue tooth Rx

= Physical connections =

Connect the pins for QSbot as shown. Bot 1 and Bot 2 pinouts are included for comparison. 

|| || QSbot || Bot1 || Bot2 ||
|| SR04  || 24 trig, 25 echo ||16 trig, 17 echo || P24 trig, P25 echo  || Vin *SR04 must have no more than 5.0v Vin* ||
|| -- || P24 trig ||  P16 trig || P24 trig ||
|| -- ||  P25 echo || P17 echo || P25 echo || BE SURE ECHO HAS ~~330~~ 10k ohm resistor! ||
|| Ready LED ||  No Ready LED on QSbot || P3 || P23 ||
|| MotorA ||  8-11 || d_24 d_25 d_26 d_27 || d_15 d_14 d_13 d_12|| Vin Motors Can be 5-12v ||
|| -- ||  P08 = IN1 || P11 = IN1 || P15 = IN1 || 
|| -- ||  P09 = IN2 || P12 = IN2 || P14 = IN2 || 
|| -- ||  P10 = IN3 || P13 = IN3 || P13 = IN3 || 
|| -- ||  P11 = IN4 || P14 = IN4 || P12 = IN4 || 
|| MotorB ||  12-15 || d_20 d_21 d_22 d_23 || d_11 d_10 d_9 d_8  || Vin Motors Can be 5-12v  ||
|| -- ||  P12 = IN1 || P20 = IN1 || P11 = IN1  || 
|| -- ||  P13 = IN2 || P21 = IN2 || P10 = IN2  || 
|| -- ||  P14 = IN3 || P22 = IN3 || P9  = IN3  || 
|| -- ||  P15 = IN4 || P23 = IN4 || P8  = IN4  || 
|| HC05/HC06 ||  26-27 || P2, P0, P1 || P27, P26, P22 || Vdd 3.3v||
|| --   ||  p26 = HC06-Tx || P2 = bt Tx  || P27 = bt Tx ||
|| --   ||  P27 = HC06-Rx || P0 = bt Rx  || P26 = bt Rx ||
|| --   ||  xx || P1 = bt KEY || P22 = bt KEY || (KEY is not used on HC06 carrier board version) ||

= QSbot.f =

QSbot.f includes a couple additions.

  * The QS LEDs are used to visually represent the current distance measurement.  This also serves as a "Ready" indicator. 
  * QS LED count increments of 15 mm
  * SR04_display routine shows the numeric value for the distance measurement without scrolling 
  * The extra `dup drop` pairs are removed from the SR04 trigger pulse routine
  * The SR04 driver includes a 60 ms recovery time per the data sheet.

On the list:
  * SR04 - Add a flag to control measurement ON/OFF
  * SR04 - add timeout for too long measurement (?)
  * SR04 - Add variance
  * SR04 - Add running average, 
  * SR04 - Add recent min and max, 
  * SR04 - Add detect receding/closing, 
  * SR04 - Add detect too close/too far

{{{

}}}

= Details =

Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages