#summary HC05 and HC06 Bluetooth for Little Robot(tm)
#labels v5.3,LittleRobot,bluetooth,v5.5

<wiki:toc max_depth="9" />

= Introduction =

The HC05 and HC06  Bluetooth module allows communication with the prop via bluetooth.  No cables are needed after initial programming. 

This pages covers the immediate set up steps for the HC06.  If you have problems, or want to use the hc05, see

http://code.google.com/p/propforth/wiki/LittleRobotBluetoothDETAILS

for addditional details.

= HC06 =

The workshop is using the HC06 modules mounted on a 6 pin carrier board.  only Vcc (3.3v), GND, Rxd and Txd are used.

= Configuration Script =

The following is a modification of the script found in bot.f

NOTICE this script is undergoing maintenance, do not use.

{{{
fl

\ for the HC06

\ green wire - this is not used on the carrier mounted modules
1 wconstant hcProgPin 

\ white/orange wire - QSbot RXD to p27
27 wconstant hcRx

\ white/green wire - QSbot TXD to p26
26 wconstant hcTx

\  initally they come up at 9600,  switch this after we set it to 230400

 9600 4/ wconstant hcBaud
\ 230400 4/ wconstant hcBaud


0 wconstant hcSerialCog

hcSerialCog cogreset 100 delms
c" hcRx hcTx hcBaud serial" hcSerialCog cogx 100 delms


: hcSend
        cogid hcSerialCog iolink .cstr 1000 delms cogid iounlink cr
;

hcProgPin pinhi hcProgPin pinout

\ REMEMBER the HC06 LED must be blinking!
\ If it isn't , disconnect Gnd, and reconnect. It will blink

c" AT" hcSend
c" AT+VERSION" hcSend
c" AT+NAME?" hcSend

\ note baud change immediately on hc06!!!!!
\ don't do this until you've set everything else.
\ c" AT+BAUD9" hcSend

hcProgPin pinlo 

1000 delms

hcSerialCog cogreset 100 delms



hcProgPin pinlo


}}}

AFter the HC06 responds to 

 * c" AT" hcSend    with OK 
 * c" AT+VERSION" hcSend with  OKlinvorV1.8  
 * c" AT+NAME?" hcSend  with OKsetname

You are ready to configure. 

Copy the following into an editor and  set the name correctly

Send the commands one at a time 

{{{
c" AT" hcSend
c" AT+VERSION" hcSend
c" AT+NAMEQSbot-CPL-01-of-12" hcSend
c" AT+PIN1234" hcSend
c" AT+PN" hcSend
c" AT+BAUD9" hcSend

}}}



-----

= Pair the devices =

The HC05 should be visible as a slave (pairable) device when re-powered

== Windows XP ==

Run Blue Tooth Wizard 

The wizard should find a device, and display the name you provided in the the script. 

Enter your pin (as you assigned in the script, or 1234 if you left the default)

XP will add two COM ports, on incoming and one out going. 

The outgoing port is the one you will use with Teraterm.  The incoming port doesn't do anything, but has to be there. 

== Android ==

  * Select Settings.  
  * Under (or near) WiFi find Bluetooth. 
  * select "Search for Devices" (upper right corner on Nexus)

You should see an eight(?) hex value address displayed very quickly. 

A short time later this will change to the name you assigned in the script.

Select this, and enter your pin you define in the script, or 1234 if you left the default.

=== Blueterm ===

You can now connect to this device using Blue term (the three dots in the lower right corner is the secret!)


= NOTES =

- end -